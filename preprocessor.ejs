{
	$join: [
		=$,
		{
			phantomAdLineItemIDs: ["383422586", "383422226", "383421746", "440015306"],

			portrait: { if-all: [
				{ if: =app.idiom, equals: "tablet", then: true, else: false },
				{ if: =view.width, at-least: 700, then: true, else: false },
				{ if: =view.width, less-than: =view.height, then: true, else: false }
			], then: true, else: false},
			landscape: { if-all: [
				{ if: =app.idiom, equals: "tablet", then: true, else: false },
				{ if: =view.width, at-least: 700, then: true, else: false },
				{ if: =view.width, more-than: =view.height, then: true, else: false }
			], then: true, else: false},

			scale: {
				width: { if: =view.width, more-than: 480, then: {
					if: =view.width,
					less-than: =view.height,
					then: { $divide: [=view.width, 768] },
					else: { $divide: [=view.width, 1024] }
				}, else: 1},
				height: { if: =view.width, more-than: 480, then: {
					if: =view.width,
					less-than: =view.height,
					then: { $divide: [=view.height, 1024] },
					else: { $divide: [=view.height, 768] }
				}, else: 1},

				phone: { if-any: [=display.width.compact, =display.width.regular], then: =display.width.compact, else:
					{ if: =app.idiom, equals: "phone", then: true, else: false }
				},

				tablet: { if-any: [=display.width.compact, =display.width.regular], then: =display.width.regular, else:
					{ if: =app.idiom, equals: "tablet", then: true, else: false }
				},

				rail: { if-all: [
					{ if: =app.idiom, equals: "tablet", then: true, else: false },
					=display.width.compact,
					=display.height.regular
				], then: true, else: false}
			},

			smoothPagination: { if-any: [
				{if: =scale.phone, then: true, else: false},
				{if: =layoutStrategy.pagination, equals: "smooth", then: true, else: false}
				], then: true, else: false },

			pagedPagination: {if: =layoutStrategy.pagination, equals: "paged", then: true, else: false},

			justify: "left",

			firstPage: {if: =page.number, equals: 0, then: true, else: false },
			lastPage: {if: =page.number, equals: {$subtract: [=page.count, 1]}, then: true, else: false },

			media: {
				if: =page.hasmedia,
				then: {
					type: "=article.media[page.mediaindex].type",
					width: "=article.media[page.mediaindex].width",
					height: "=article.media[page.mediaindex].height",
					aspect: {$divide:["=article.media[page.mediaindex].width", "=article.media[page.mediaindex].height"]},
					caption: "=article.media[page.mediaindex].caption",
					credit: "=article.media[page.mediaindex].credit",
					filename: "=article.media[page.mediaindex].filename"
				},
				else: {
					type: "",
					width: 0,
					height: 0,
					aspect: 0,
					caption: "",
					credit: "",
					filename: ""
				}
			},

			text: {
				indent: 30,
				overflow: "..."
			},

			color: {
				background: white,
				tint: { if-all: [
					{ if: =app.idiom, equals: "tablet" },
					{ if: =issue.type, equals: "NOW" }
				], then: "#E9F5FE" },
					 articleReadColor: #777777
			},

			size: {
				rail_height_with_image: 134,
				rail_height_without_image: 104,
				continuation_height_normal: 90,
				continuation_height_large: 270,
				continuation_height_strap: 226,
				media: {
					if-all: [
						=display.width.compact
					], then: {
						if-all: [
							{if:"=article.media[page.mediaindex].type", equals: video},
							{if: "=article.media[page.mediaindex].height", more-than: "=article.media[page.mediaindex].width"}
						], then: {
							is_inset: true,
							width: {$divide: [{$subtract: [=view.width, 60]}, 2]},
							left_border: { if: =page.number, equals: 0, then: 20, else: 0 },
							right_border: 0,
							caption_padding: 0
						}, else: {
							is_inset: false,
							width: {$subtract: [=view.width, 10]},
							left_border: 5,
							right_border: 5,
							caption_padding: 15
						}
					}, else: {
						is_inset: false,
						width: {$subtract: [=view.width, 40]},
						left_border: 0,
						right_border: 0,
						caption_padding: 0
					}
				}
			},

			tablet_footer_tips: [
				"You can move the WSJ icon from the Newsstand folder to your home screen.",
				"Your WSJ app supports virtual reality video. Look for a moving play button.",
				"Your WSJ app supports Handoff so you can read seamlessly between iOS devices.",
				"The WSJ iPad edition is published on holidays, even when there is no print newspaper",
				"Crossword fans can test themselves with the puzzleâ€™s increasing difficulty later in the week.",
				"You can play today's WSJ Crossword by choosing it from the side menu.",
				"The WSJ app contains a week of enhanced daily editions. Find them on the Editions page.",
				"You can read the Latest News by tapping on the red Latest News banner.",
				"You can save storage space by changing the number of downloaded issues in your settings.",
				"You can share and save articles by swiping left on them in the side menu.",
				"You can search for WSJ articles by tapping the magnifying glass in the upper-right corner."
			],
			footer_tip: { $random: [0, 11] }
		},
		{
			if: =app.version, equals: "7.8", then: {
				ad: {
					cache: {
						Cube: {
							loaded: false,
							lineItemID: "0"
						},
						HalfScreen: {
							loaded: false,
							lineItemID: "0"
						},
						Skyscraper: {
							loaded: false,
							lineItemID: "0"
						},
						Banner: {
							loaded: false,
							lineItemID: "0"
						},
						Fullpage: {
							loaded: false,
							lineItemID: "0"
						}
					}
				}
			}, else: {

			}
		}
	]
}
